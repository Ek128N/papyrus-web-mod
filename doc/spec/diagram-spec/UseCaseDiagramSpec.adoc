////
 Copyright (c) 2024 CEA LIST, Artal Technologies.
 This program and the accompanying materials
 are made available under the terms of the Eclipse Public License v2.0
 which accompanies this distribution, and is available at
 https://www.eclipse.org/legal/epl-2.0/

 SPDX-License-Identifier: EPL-2.0

 Contributors:
     Aurelien Didier (Artal Technologies) - Issue 201
////

= Use Case Diagram specification
:toc:
:toclevels: 3

== Can create
Can be created under a Package and under a Model (but not inside a Profile).

== Initialization
Nothing special.

== Nodes

=== Activity as subject
Can be created in an Use Case Diagram and under Package.

==== On Creation
Nothing special.

==== Can create
Nothing special.

==== OnSet
Nothing special.

==== On Reconnect
Nothing special.

==== On Deletion
Nothing special.

==== On Semantic DnD
Nothing special.

==== On Direct Edit
Nothing special.

==== Label
Activity label shall be prefixed with &laquo;activity&raquo; or &laquo;activity, singleExecution&raquo; if is single execution if set to true. +
All label should be in italic if isAbstract is set to true.

image::UseCaseDiagram/Activity.png[title="Representation Activity"]

=== Actor
Can be created in an Use Case Diagram and under Package.

==== On Creation
Nothing special.

==== Can create
Always

==== OnSet
Nothing special.

==== On Reconnect
Nothing special.

==== On Deletion
Nothing special.

==== On Semantic DnD
Nothing special.

==== On Direct Edit
Nothing special.

==== Label
The label should be displayed in italic if the element is abstract

image::UseCaseDiagram/Actor.png[title="Representation Actor"]

=== Class as subject
Can be created in an Use Case Diagram and under Package.

==== On Creation
Nothing special.

==== Can create
Nothing special.

==== OnSet
Nothing special.

==== On Reconnect
Nothing special.

==== On Deletion
Nothing special.

==== On Semantic DnD
Nothing special.

==== On Direct Edit
Nothing special.

==== Label
Label should be in italic if isAbstract is set to true.

image::UseCaseDiagram/Class.png[title="Representation Class"]

=== Comment
Can be created in a Use Case Diagram, under a Package, an Activity, a Class, a Component, an Interaction and a StateMachine.

==== On Creation
Nothing special.

==== Can create
Nothing special.

==== OnSet
Nothing special.

==== On Reconnect
Nothing special.

==== On Deletion
Nothing special.

==== On Semantic DnD
Nothing special.

==== On Direct Edit
Edit the body of the Comment.

==== Label
Display the body of the Commment.

image::Shared/Comment.png[title="Representation Comment"]

=== Component as subject
Can be created in an Use Case Diagram and under Package.

==== On Creation
Nothing special.

==== Can create
Nothing special.

==== OnSet
Nothing special.

==== On Reconnect
Nothing special.

==== On Deletion
Nothing special.

==== On Semantic DnD
Nothing special.

==== On Direct Edit
Nothing special.

==== Label
Label should be prefixed with &laquo;component&raquo; +
Label should be in italic if isAbstract is set to true.

image::UseCaseDiagram/Component.png[title="Representation Component"]

=== Constraint
Can be created in a Use Case Diagram, under a Package, an Activity, a Class, a Component, an Interaction and a StateMachine.

==== On Creation
Constraint is created with a ConstraintSpecification which is an OpaqueExpression. +
By default the OpaqueExpression language is OCL and its default value is "true". +
The context feature is set to the element that was selected when creating the Constraint.

==== Can create
Nothing special.

==== OnSet
Nothing special.

==== On Reconnect
Nothing special.

==== On Deletion
Nothing special.

==== On Semantic DnD
Nothing special.

==== On Direct Edit
Edit only the name of the Constraint.

==== Label
Constraint label shall start by the name of the Constraint in the first line. +
And it shall display the constrainSpecification (which is an OpaqueExpression) information in a second line. +
The constraintSpecification informations shall display only the first language information as follow: {{language} body}

image::Shared/Constraint.png[title="Representation Constraint"]

=== ExtensionPoint

==== On Creation

==== Can Create
Nothing special

==== On Deletion
Nothing special

==== On Set

==== On Semantic DnD
Display the view.

==== On Graphic DnD
Nothing special

==== On Direct Edit

==== Label

=== Interaction as Subject
Can be created in an Use Case Diagram and under Package.

==== On Creation
Nothing special.

==== Can create
Nothing special.

==== OnSet
Nothing special.

==== On Reconnect
Nothing special.

==== On Deletion
Nothing special.

==== On Semantic DnD
Nothing special.

==== On Direct Edit
Nothing special.

==== Label
Label should be prefixed with &laquo;interaction&raquo; +
Label should be in italic if isAbstract is set to true.

image::UseCaseDiagram/Interaction.png[title="Representation Interaction"]


=== Package
Can be created in an Use Case Diagram and under Package.

==== On Creation
Nothing special.

==== Can create
Nothing special.

==== OnSet
Nothing special.

==== On Reconnect
Nothing special.

==== On Deletion
Nothing special.

==== On Semantic DnD
Nothing special.

==== On Direct Edit
Nothing special.

==== Label
Nothing special.

image::UseCaseDiagram/Package.png[title="Representation Package"]

=== Reception

==== On Creation
Nothing special

==== Can Create
Nothing special

==== On Deletion
Nothing special

==== On Set
Nothing special

==== On Semantic DnD
Nothing special

==== On Direct Edit
Nothing special

==== Label
 The label should be displayed in italic if the element is abstract
 The label should be underlined if the element is static
 prefix with «Signal»

=== StateMachine as subject
Can be created in an Use Case Diagram and under Package.

==== On Creation
Nothing special.

==== Can create
Nothing special.

==== OnSet
Nothing special.

==== On Reconnect
Nothing special.

==== On Deletion
Nothing special.

==== On Semantic DnD
Nothing special.

==== On Direct Edit
Nothing special.

==== Label
Label should be prefixed with &laquo;stateMachine&raquo; +
Label should be in italic if isAbstract is set to true.

image::UseCaseDiagram/StateMachine.png[title="Representation StateMachine"]

=== UseCase
Can be created in an Use Case Diagram, under Package, a StateMachine, a Component, an Activity and a Class.

==== On Creation
If owner is classifier, useCase feature of the Classifier is completed with the useCase
When the Usecase is created inside an Activity, a Class, a Component, an Interaction, or a StateMachine, its feature subject is set pointing on its owner.

==== Can create
Nothing special.

==== OnSet
Nothing special.

==== On Reconnect
Nothing special.

==== On Deletion
 Delete includes
 Delete Extend

==== On Semantic DnD
Nothing special.

==== On DnD
 semantic DnD is authorized only on its container
 graphical DnD is authorized if new container is a Package or a Classifier. If it is Classifier, subject feature should be updated

==== On Direct Edit
Nothing special.

==== Label
Label should be in italic if isAbstract is set to true.

image::UseCaseDiagram/UseCase.png[title="Representation UseCase"]

== Edges

=== Abstraction
Can be created in an Use Case Diagram and under Package.

==== On Creation
Abstraction link is stored at the root of the Diagram.

==== Can create
Source and target can be any kind of element.

==== OnSet
Nothing special.

==== On Reconnect
Nothing special.

==== On Deletion
Nothing special.

==== On Semantic DnD
Nothing special.

==== On Direct Edit
Nothing special.

==== Label
Label should be prefixed with &laquo;abstraction&raquo;.

image::UseCaseDiagram/Abstraction.png[title="Representation Abstraction"]

=== Association
Can be created in an Use Case Diagram and under Package.

==== On Creation
Create an Association link stored under the root of the Diagram. +
The association created contains two properties, one for each end. +
The default properties for both ends are set to: +
 - Owner: Association +
 - Navigable: False +
 - Aggregation: None +
 - Multiplicity: 1 +
The created association is created with an "org.eclipse.papyrus" EAnnotations that has an entry with nature / UML_Nature as key / value.

==== Can create
Source and target can be any kind of element except a Package (i.e. it can be a subject or an actor).

==== OnSet
Nothing special.

==== On Reconnect
Properties are updated accordingly.

==== On Deletion
Nothing special.

==== On Semantic DnD
Nothing special.

==== On Direct Edit
Nothing special.

==== Label
Association labels shall be composed the following way: +
Start with +, -, # or ~ according to the visibility (public, private, protected, or package) +
Add Operation Name. +
Suffixed with parameters label inside () and separated by a comma. +
Add the multiplicity : +++[0..1], [1], [*], [1..*]+++ +
If a default value is defined, add "=" followed by default value label

image::UseCaseDiagram/Association.png[title="Representation Association"]

=== Dependency
Can be created in an Use Case Diagram and under Package.

==== On Creation
Dependency link is stored at the root of the Diagram.

==== Can create
Source and target can be any kind of element.

==== OnSet
Nothing special.

==== On Reconnect
Nothing special.

==== On Deletion
Nothing special.

==== On Semantic DnD
Nothing special.

==== On Direct Edit
Nothing special.

==== Label
Nothing special.

image::UseCaseDiagram/Dependency.png[title="Representation Dependency"]

=== Extend
Can be created in an Use Case Diagram and under Package.

==== On Creation
An ExtensionPoint is created under the target semantic element and an Extend link created under the source semantic element.
 The source element should be added to the extension feature
 The target element should be a created extension point added to the extendedCase feature
 Add the created extension point as extensionLocations target references
 The creation tool should forbid the creation of an Extend from and to the same element

==== Can create
Source and target must be two use cases.
 Source and target should be a non null UseCase.
 Source and target should be different
 
==== OnSet
Nothing special.

==== Container
The container is:
The source node

==== On Reconnect
Extend link is relocated under the new source semantic element, and extension point is moved under the new target.

==== Can Reconnect
 reconnect source is authorized on UseCase different from the target and new source should be editable to contain Extend
 reconnect target is authorized on UseCase different from the source
(cf org.eclipse.papyrus.uml.service.types.command.ExtendReorientCommand)

==== Delete tool
No special deletion behavior for this element.

==== On Deletion
Nothing special.

==== On Semantic DnD
Nothing special.

==== On Direct Edit
Nothing special.

==== Label
Label should be prefixed with &laquo;extend&raquo;.

image::UseCaseDiagram/Extend.png[title="Representation Extend"]

=== Generalization
Can be created in an Use Case Diagram and under Package.

==== On Creation
Generalization link is stored under the source semantic element.

==== Can create
Source and target can be any kind of element except a Package (i.e. it can be a subject or an actor).

==== OnSet
Nothing special.

==== On Reconnect
Relocate link under the new source semantic element.

==== On Deletion
Nothing special.

==== On Semantic DnD
Nothing special.

==== On Direct Edit
Nothing special.

==== Label
No label.

image::UseCaseDiagram/Generalization.png[title="Representation Generalization"]

=== Include
Can be created in an Use Case Diagram and under Package.

==== On Creation
Include link is stored under the source semantic element.
 The source element should be added to the includingCase feature
 The target element should be added to the addition feature
 The creation tool should forbid the creation of an Include from and to the same element

==== Can create
Source and target must be two use cases.

==== OnSet
Nothing special.

==== On Reconnect
Relocate link under the new source semantic element.

==== Delete tool
No special deletion behavior for this element.

==== On Deletion
Nothing special.

==== On Semantic DnD
Nothing special.

==== Reconnect tool
 The container change according to the new source of reconnection

==== On Direct Edit
Nothing special.

==== Label
Label should be  prefixed with &laquo;include&raquo;.

image::UseCaseDiagram/Include.png[title="Representation Include"]

=== Link (from Comment)
Can be created in an Use Case Diagram, under Package, a StateMachine, a Component, an Activity and a Class. +
Link is a feature based edge (it does not represent a semantic element).

==== On Creation
No element is created. Tool add the targeted element as an annotatedElement of the Comment.

==== Can create
Source shall be a Comment. +
Target can be anything.

==== OnSet
Nothing special.

==== On Reconnect
Nothing special.

==== On Deletion
Nothing special.

==== On Semantic DnD
Nothing special.

==== On Direct Edit
Not available. Nothing to edit.

==== Label
No label.

image::UseCaseDiagram/Link_Comment.png[title="Representation Link (from Comment)"]

=== Link (from Constraint)
Can be created in an Use Case Diagram, under Package, a StateMachine, a Component, an Activity and a Class. +
Link is a feature based edge (it does not represent a semantic element).

==== On Creation
No element is created. Tool add the targeted element as an constrainedElement of the Constraint.

==== Can create
Source shall be a Constraint. +
Target can be anything.

==== OnSet
Nothing special.

==== On Reconnect
Nothing special.

==== On Deletion
Nothing special.

==== On Semantic DnD
Nothing special.

==== On Direct Edit
Not available. Nothing to edit.

==== Label
No label.

image::UseCaseDiagram/Link_Constraint.png[title="Representation Link (from Constraint)"]

=== PackageImport
Can be created in an Use Case Diagram and under Package.

==== On Creation
Package Import link is stored under the source semantic element.

==== Can create
Target must be a Package.

==== OnSet
Nothing special.

==== On Reconnect
Relocate link under the new source semantic element.

==== On Deletion
Nothing special.

==== On Semantic DnD
Nothing special.

==== On Direct Edit
Nothing special.

==== Label
Label should be &laquo;import&raquo;.

image::UseCaseDiagram/PackageImport.png[title="Representation PackageImport"]

=== PackageMerge
Can be created in an Use Case Diagram and under Package.

==== On Creation
Package Merge link is stored under the source semantic element.

==== Can create
Source and target must be Packages.

==== OnSet
Nothing special.

==== On Reconnect
Nothing special.

==== On Deletion
Nothing special.

==== On Semantic DnD
Nothing special.

==== On Direct Edit
Nothing special.

==== Label
Label should be &laquo;merge&raquo;.

image::UseCaseDiagram/PackageMerge.png[title="Representation PackageMerge"]

=== Usage
Can be created in an Use Case Diagram and under Package.

==== On Creation
Nothing special.

==== Can create
Usage link is stored under the source semantic element.

==== OnSet
Nothing special.

==== On Reconnect
Nothing special.

==== On Deletion
Nothing special.

==== On Semantic DnD
Nothing special.

==== On Direct Edit
Nothing special.

==== Label
Label should be prefixed with &laquo;use&raquo;.

image::UseCaseDiagram/Usage.png[title="Representation Usage"]