ifndef::imagesdir[:imagesdir: imgs]

= User Documentation
:toc:
:toclevels: 4

== Home page

The home page is the starting point of a modeling project. It is where user can initiate a new project or manage an existing one.

Creating a new project in the platform can be done in the following ways:

* Create a blank project
* Create a project from existing templates
* Upload a previously exported project

For more details on project creation topic, see https://docs.obeostudio.com/{sirius-documentation-version}/help_center.html#create-project[`Create a Project`] section of the documentation.

As far as existing projects are concerned, the following actions are available:

* Open an existing project +
To open an existing project, the user has to locate the project in the Project list and click on its name.
* Delete a project +
See the https://docs.obeostudio.com/{sirius-documentation-version}/help_center.html#_delete_a_project[`Delete a Project`] section of the documentation
* Rename a project +
See the https://docs.obeostudio.com/{sirius-documentation-version}/help_center.html#_rename_a_project[`Rename a Project`] section of the documentation

Once the project (new or existing) is chosen, the workbench page is presented.

== Workbench

The Workbench page is the main page where Projects are edited.
It is basically composed of one main central area and two side panels. +
The <<project-explorer-panel,`left panel`>> is mainly used to see the structure of the Project as a tree of all its parts.
The <<diagram-panel,`central area`>> is the place where diagrams live and the <<right-side-panel,`right panel`>> can display the Properties of the current diagram selection.

[[project-explorer-panel]]
=== Project Explorer panel

The Explorer panel displays all elements contained by the _Project_. Roots nodes are the _Resources_ stored in the project where all elements underneath live. The root element for _UML_ resources is generally a _Model_ or a _Profile_.

WARNING: Note that the name of the resource should always end with `.uml`.

==== _Explorer Tree_

To create a _New Representation Diagram_, use the contextual menu on any semantic element and choose the action _New Representation_, choose the type of diagram in the dialog.

The _Explorer_ tree contains semantic elements of the _Model_ and diagrams at the same level.
Diagram elements can be easily recognized by the diagram icon image:diagram.svg[diagram icon,16] whereas semantic elements have specific icons depending on their nature.

From the _Explorer_ view, it is possible to create new semantic elements. To do so, use the contextual menu on any semantic element and choose _New Object_. In the dialog, select the new element to create among all semantic elements listed in the dropdown (names are prefixed by the feature containment).

Regarding the representation creation, it is worth noting that _Representations_ depend on the selected semantic element (the one used to open the contextual menu). Here are available representations and their creation contexts:

|===
| Representation | Context

| _Class Diagram_
| _Package_

| _Composite Structure Diagram_
| _Package_

| _Package_
| _Package_

| _State Machine Diagram_
| _State Machine_
|===

As we can see in the table above, the _State Machine Diagram_ can only be added from a _State Machine_ semantic element.

Deletion of semantic elements (and representation diagrams) is possible through the contextual menu of tree nodes.

==== _Explorer toolbar_

The _Explorer toolbar_ contains global _Project_ actions:

* _Upload model_ +
  Add a previously downloaded UML _Model_ into the _Project_. Accepted UML _Model_ files should have the `.uml` extension
* Synchronization with _Representation_ editor +
  When Synchronization with _Representation_ is *enabled*, selecting a graphical element in the diagram will *_Reveal_* and *_Select_* the semantic element corresponding in the _Explorer_ tree. +
  When Synchronization with _Representation_ is *disabled*, selecting a graphical element in the diagram will *_Select_* the semantic element corresponding in the _Explorer_ tree only if it has already been revealed.

==== Apply profile

To apply a profile use the contextual menu from the root _Model_ element.
Select the profile to apply to the list of candidates.
The available profiles are:

* The static profiles registered in the platform
* The dynamic profiles stored in other projects of your _Papyrus Web_ server.

==== Apply stereotype

To apply a stereotype:

* Make sure that the correct profile is applied on your _Model_
* Use the contextual menu _Apply Stereotype_ on an element
* Select the _Stereotype_ to apply

This stereotype is now displayed in the widget _Applied Stereotypes_ in the _Detail_ panel.

To edit the properties of a _Stereotype_, select the matching _Stereotype Application_ from the _Explorer_ panel.

____
üóíÔ∏è *Note:* You can navigate to a _Stereotype Application_ using the widget _Applied Stereotypes_ in the _Detail_ panel.
____

=== Validation panel

The _Validation_ panel shares the left area of the workbench page with the _Explorer_. See the https://docs.obeostudio.com/{sirius-documentation-version}/help_center.html#_validation_view[documentation section] for more details.

[[diagram-panel]]
=== Diagram panel

==== Generalities

The diagram panel shows _Representation Diagrams_ created in the project. Several _Representations_ can be opened and they appear in separate tabs.
Diagrams represent graphically a part of your semantic model. Each representation defines its own set of rules regarding its content. +
Graphical elements can be selected by clicking on elements. The innermost clicked element is selected.
A red border (with eight square handles) appears around the element when it is selected. +
Once a graphical element is selected, a second click on it will reveal a set of available tools grouped in a horizontal palette.

The Palette displays all the tools available according to the current selection. It has the following subgroups from left to right:

* _Connector_ action
Action to initiate a _Connection_ from the current element to another one. This action is only present in the Palette when a _Connection_ is available. Once the second element is chosen, the list of connections between those elements is shown to specify the actual nature of this new _Connection_
* Children element creation group +
All children's creation actions are grouped in a dropdown list depending on the selected element's nature.
* Edge creation group +
This group presents the list of the available _Connection_ types starting from the selected element, once one _Connection_ has been chosen, only compatible elements can be targeted to finish the edge creation.
* Generic tools (Edit, Delete from the diagram, Delete from the model, Hide, Fade)
As far as Edit is concerned, it is worth noting that names (or more generally texts) can be edited in the following ways:
 ** Edit action of the Palette
 ** Double-click on elements
 ** Press F2
+
WARNING: As far as _Edge_ elements are concerned, start and end labels can only be edited by double-clicking them. The above ways will edit the edge label itself (the centered label of the edge).
* Collapse / Expand tools +
Those actions are only available for containers or compartments (e.g _Package_ or _Operations Compartment_ of a _Class_)
* Close the Palette action

The Diagram panel has global actions grouped in a horizontal toolbar underneath the diagram tabs.
This toolbar contains the following actions:

* Zoom percent selector
* Zoom group
* Fit screen action
* Auto Arrange all action
* Share the diagram link
* Reveal hidden elements of action
* Reveal faded elements of action

===== Label
Keywords on Nodes and Edges are displayed on the first separate line of the label. If the semantic element is stereotyped, the stereotype is displayed on a second separate line. Finally, the label will be displayed on the third line.The label can be the simple name of the element, or more complex in some specific cases detailed in the corresponding diagram section.
Label of UML elements with the _isAbstract_ feature set to true is displayed in italic.
Label of UML elements with the _isStatic_ feature set to true is displayed underlined.

image::labelsDisplayed.png[Labels Overview,400, align="center"]

===== Edge Creation
Edges can be created between Nodes whose types match the Edge's source and target types. If the creation of an Edge is not authorized, the mouse cursor will be showing a forbidden sign. It is not possible for now to create an Edge between two Edges or between an Edge and a Node. 

===== Semantic DnD
Users can select elements in the Explorer view and drag and drop them into their container Nodes in the diagram. This drag and drop doesn't perform any semantic modification, except in specific case detailed in the corresponding diagram section. In addition, some diagrams allow semantic drag and drop of any element from the Explorer view (in the same resourceSet as the diagram) on the background of the diagram.  

Dragging and dropping an element represented as an Edge on the diagram will create the source/target elements of the Edge if they aren't already represented. Note that Edges can be dropped anywhere on the diagram, but they will only appear in their semantic container. 

===== Reconnection
Users can reconnect Edges by clicking on the source or target end of the Edge to reconnect, and drag and drop it on a new element. 

==== Profile Diagram

image::diagProfile.png[Profile Diagram Overview,800, align="center"]

===== Specific Features on Label
- The label of an Element Import is the label of the UML metaclass it references as its _imported element_.

===== Specific Features on Direct Edit
- The direct edit tool doesn't perform any modification on UML metaclasses.

===== Specific Features on Semantic DnD
- The semantic drag and drop of an Element Import with an UML metaclass as its _imported element_ on the Profile diagram produces a Node with the name of the UML metaclass as its label. Note that it is not possible to drag and drop Element Import with no _imported element_ or with an _imported element_ that is not an UML metaclass. 

===== Specific Features on Reconnection
- Reconnecting an Extension target to a different Class updates the Stereotype property _type_.

[[right-side-panel]]
=== Right side panel

On the right of the page, one can see several stacked views giving information about the current selection.

==== Details

The Details panel is used to visualize and edit all the features of the selected semantic object (from Explorer or diagrams). The panel is divided into 4 separate tabs:

* UML: details the main UML features of the semantic element
* Comments: displays comments associated with the selected element. Those comments can be owned by the element or applied to it (using a relation between the comment and this element).
* Profile: focus on applied stereotypes/profiles of this selected element
* Advanced: This tab displays all features of the semantic element. It uses generic rules to find the best suitable widget to visualize and edit the feature.

In the UML tab, each property is represented by an appropriated widget according to its nature. For instance, a property of type `ecore::EString` will be represented by a text widget. It might be, in some situations more appropriate to represent this string with a text area widget that supports multiple lines of text.

Basic widgets

In the following table, we present the mapping between basic types and their associated widgets

|===
| Basic Type | Widget

| _Mono Boolean_
| _Checkbox_

| _Mono String_
| _Text field_ or _Text area_

| _Mono Number_
| _Text field_

| _Mono Enumeration_
| _Select_ or _Radio_

| _Many Boolean, String, Number, Enumeration_
| _Primitive List_

| _Many and Mono Reference_
| _Reference_
|===

Here is https://docs.obeostudio.com/{sirius-documentation-version}/help_center.html#_details_view[the Sirius documentation] of all those widgets.

Custom widgets

Some UML 2 concepts have properties that need a special UI to manage their data. Here are the details of each custom widget.

===== Language Expression

A language expression custom widget has been introduced to manage a couple of connected lists in the following concepts:

* `FunctionBehavior`
* `OpaqueAction`
* `OpaqueBehavior`
* `OpaqueExpression`

All those concepts manage a couple of lists of `strings` which are weakly connected via their index. The first list, called '[.code]``languages``' contains the name of languages, such as `"JAVA"` or `pass:c["C++"]`. The second one contains the body expression expressed in the language of the same rank in the list. Thus those lists could not be edited in Papyrus UI as separate ordinary lists of text fields. This is the reason why a new custom widget has been developed.

image::languageexpression.png[language expression custom widget,400, align="center"]

The above image shows the custom widget associated with the virtual property '[.code]``language``' of a `FunctionBehavior`. The plus icon in front of the property label can be used to populate the following list by adding a predefined language or a new one. This selection of the language to add is done using a modal dialog.

Each language in the list is shown as a collapsible section with the name of the language as the title. On the right part of the header/title section, there is the section toolbar containing all actions that can be performed in this language. Once a language is expanded, the body of the language is revealed and the user can modify it. Only one language is expanded at a time. An expanded language will be automatically collapsed if the user expands another one.

Languages can be reordered using up or down actions of the toolbar. Since the list is not a ring, the user is not allowed to move up the first language or move down the last one.

Removing a language can be done using the trash icon action of its toolbar. No confirmation is required before deleting a language element.

===== Primitive List

The primitive list custom widget aims to provide capabilities to visualize and edit _EAttributes_ wich represent more than one value.

image::primitive-list.png[]

The values are represented as list items.
Each item can be deleted using the _trash_ icon.
To add a value, the _New item_ input can be used.
Be aware that the server receives a _String_ value and needs to convert it to the correct _DataType_.
For widgets used in the default pages of the _Details_ view, Papyrus Web uses pure _EMF_ implementation to convert the given _String_ into the required _DataType_.
For example, for a _boolean_ feature, the given _String_ is converted to _true_ only if it is equal (ignoring case) to 'true'.

In the context of _UML_, for a more exhaustive list of convertion rule look at:

* _org.eclipse.uml2.uml.internal.impl.UMLFactoryImpl.createFromString(EDataType, String)_
* _org.eclipse.uml2.types.internal.impl.TypesFactoryImpl.createFromString(EDataType, String)_

==== Related Elements

There is a section about the link:++https://docs.obeostudio.com/{sirius-documentation-version}/help_center.html#project-editor++[_Related Elements view_] in the documentation.

==== Representations

There is a section about link:++https://docs.obeostudio.com/{sirius-documentation-version}/help_center.html#_representations_view++[_Representations view_] in the documentation.
